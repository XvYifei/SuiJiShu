<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>极简手势识别</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            width: 100vw;
            height: 100vh;
            background-color: #000;
            overflow: hidden;
            touch-action: none;
        }
        
        .gesture-feedback {
            position: absolute;
            font-size: 36px;
            font-weight: bold;
            color: #fff;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
            opacity: 0;
            pointer-events: none;
            z-index: 100;
            transition: opacity 0.3s, transform 0.8s;
            transform: translateY(0);
        }
        
        .click-feedback {
            color: #4CAF50;
        }
        
        .swipe-feedback {
            color: #2196F3;
        }
    </style>
</head>
<body>
    <script>
        // 创建手势反馈元素
        function createFeedbackElement(text, x, y, isClick) {
            const feedback = document.createElement('div');
            feedback.className = `gesture-feedback ${isClick ? 'click-feedback' : 'swipe-feedback'}`;
            feedback.textContent = text;
            feedback.style.left = `${x}px`;
            feedback.style.top = `${y}px`;
            
            document.body.appendChild(feedback);
            
            // 显示反馈
            setTimeout(() => {
                feedback.style.opacity = '1';
                feedback.style.transform = 'translateY(-80px)';
            }, 10);
            
            // 移除元素
            setTimeout(() => {
                feedback.style.opacity = '0';
                setTimeout(() => {
                    document.body.removeChild(feedback);
                }, 300);
            }, 1000);
        }
        
        // 触摸变量
        let touchStartY = 0;
        let touchStartTime = 0;
        
        // 触摸开始事件
        document.addEventListener('touchstart', function(e) {
            touchStartY = e.touches[0].clientY;
            touchStartTime = new Date().getTime();
        });
        
        // 触摸移动事件 - 阻止默认行为防止页面滚动
        document.addEventListener('touchmove', function(e) {
            e.preventDefault();
        }, { passive: false });
        
        // 触摸结束事件
        document.addEventListener('touchend', function(e) {
            const touchEndY = e.changedTouches[0].clientY;
            const touchEndTime = new Date().getTime();
            const timeDiff = touchEndTime - touchStartTime;
            
            // 计算滑动距离
            const distanceY = touchEndY - touchStartY;
            const isSwipe = Math.abs(distanceY) > 10; // 滑动阈值
            
            const x = e.changedTouches[0].clientX;
            const y = e.changedTouches[0].clientY;
            
            // 上滑手势
            if (isSwipe && distanceY < 0) {
                createFeedbackElement('上滑', x, y, false);
            } 
            // 点击手势
            else if (!isSwipe && timeDiff < 300) {
                createFeedbackElement('点击', x, y, true);
            }
        });
        
        // 防止iOS橡皮筋效果
        document.addEventListener('touchmove', function(e) {
            if (e.scale !== 1) {
                e.preventDefault();
            }
        }, { passive: false });
        
        // 鼠标点击事件（用于桌面测试）
        document.addEventListener('click', function(e) {
            createFeedbackElement('点击', e.clientX, e.clientY, true);
        });
    </script>
</body>
</html>
